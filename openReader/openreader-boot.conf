# OpenReader Boot Replacement
# Upstart configuration to launch OpenReader instead of Amazon framework
# Location: /etc/upstart/openreader-boot.conf (installed by installer script)
#
# This file prevents the default Kindle UI from starting and launches
# OpenReader instead, creating an "Amazon-Free" boot experience.
#
# To disable: Delete this file from /etc/upstart/ and reboot
# Emergency recovery: Connect via USB and delete this file

description "OpenReader Launcher - Amazon-Free Boot"
author "terpinedream"

# Start early, before framework and other GUI services
start on stopped udev-add-finished
stop on runlevel [06]

# Stop framework before it starts
pre-start script
    # Stop framework and related services before they fully initialize
    stop lab126_gui 2>/dev/null || true
    stop framework 2>/dev/null || true
    stop pillow 2>/dev/null || true
end script

# Launch OpenReader
exec /mnt/us/extensions/kindlelauncher/bin/boot-replacement.sh

